<!-- {% load static %} -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/E-FOOD/image/favicon.ico">
    <link rel="stylesheet" href="/E-FOOD/index.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>MarsFood</title>
</head>
<body>
    <main class="forget-p-main flex flex-col justify-center items-center h-[100vh] w-[100%] bg-[#ba1f1d]">
        <section class="w-[80%] mx-auto h-[80vh] font-semibold bg-[#fff]">
            <h1 class="text-[40px] text-center mt-[5%]">Check Your Phone</h1>
            <p class="text-center">we've sent the code to your email</p>
            <form action="#" method="" class="forget-p w-[60%] mx-auto mt-10 ">
                <!-- {% csrf_token %} -->
                <div class="flex justify-center gap-7 otp-bx">
                    <input type="text" maxlength="1">
                    <input type="text" maxlength="1">
                    <input type="text" maxlength="1">
                    <input type="text" maxlength="1">
                </div>
                <p class="expires text-center">Code expires in: <span class="time text-[#ba1f1d]"></span></p>
                <div class="h-[140px] w-[60%] mx-auto mt-[5%] flex gap-[20px] justify-center">
                    <button class="mx-auto">Verify</button>
                    <button class="mx-auto bg-[#f3a111]">Resend</button>
                </div>
               
            </form>
        </section>
    </main>
   





<script>
    // INPUT LOGIC
    const inputs = document.querySelectorAll(".otp-bx input");
    let otp = ""
inputs.forEach((input, index) => {
    input.dataset.index = index;
    input.addEventListener("paste", handleOtpPaste);
    input.addEventListener('input', handleOtp); // Changed from 'keyup' to 'input'
});

function handleOtpPaste(e) {
    e.preventDefault(); // Prevent pasting into individual input fields
    const data = e.clipboardData.getData("text");
    const value = data.split("").slice(0, inputs.length); // Limit input length to the number of fields
    inputs.forEach((input, index) => {
        input.value = value[index] || ""; // Set input values
    });
    submit();
}

function handleOtp(e) {
    const input = e.target;
    const value = input.value;
    const fieldIndex = parseInt(input.dataset.index);
    input.value = value ? value[0] : ""; // Allow only single character input

    if (value.length > 0 && fieldIndex < inputs.length - 1) {
        inputs[fieldIndex + 1].focus(); // Move to the next input field
    }
    if (e.inputType === "deleteContentBackward" && fieldIndex > 0) {
        inputs[fieldIndex - 1].focus(); // Move to the previous input field on backspace
    }
    if (fieldIndex === inputs.length - 1 && value.length > 0) {
        submit(); // Submit the form when the last input is filled
    }
}

function submit() {
    let otp = "";
    inputs.forEach((input) => {
        otp += input.value;
        console.log(otp)
        document.querySelector('.otp-number').textContent += otp
        // input.disabled = true;
        // input.classList.add('disabled');
    });
    // Here, you can use the 'otp' variable to handle the submitted OTP.
}

    // FORGET PASSWORD TIMER
let counterMinutes = 9
let counterSeconds = 59
// if (counterSeconds < 10) {
//     counterSeconds = counterSeconds.concat('0' , counterSeconds)
// }

const updateTimer = () => {
    document.querySelector('.time').textContent = `${counterMinutes} : ${counterSeconds}`;
}

const countdownSeconds = setInterval(() => {
    counterSeconds = counterSeconds - 1;
    if (counterSeconds < 0) {
        counterSeconds = 59;
        counterMinutes = counterMinutes - 1;
    }
    updateTimer();
}, 1000);

updateTimer();
</script>
</body>
</html>